<!DOCTYPE html>
<html>
<th:block th:replace="~{fragments/head :: head(title='Gastos')}"></th:block>
<body>
	<header>
		<th:block th:replace="~{fragments/navbar :: navbar}"></th:block>
	</header>
	<main class="container">

		<div class="row my-5">
			<div class="col-lg-3 mb-4">
				<a type="button" class="btn btn-dark w-100 mb-4"
					th:href="@{/gastos/new}">Novo Gasto</a>
				<a type="button" class="btn btn-success w-100 mb-4"
					th:href="@{/}">Exportar CSV</a>
					
				<a type="button" class="btn btn-warning w-100 mb-4"
					th:href="@{/gastos/pdf}" target="_blank">Exportar PDF</a>
					
				<h3 class="mb-3">Filtros</h3>
				
				
				<form th:action="@{/gastos}" method="get"
					class="p-3 border rounded bg-light shadow-sm">

					<div class="mb-3">
						<label for="banco" class="form-label fw-bold">Banco</label> <select
							id="banco" class="form-select" th:name="banco">
							<option value="" th:selected="${param.banco == null}">Todos</option>
							<option th:each="banco : ${bancos}" th:value="${banco}"
								th:text="${banco}"
								th:selected="${#strings.equals(param.banco,banco.name())}"></option>
						</select>
					</div>
					<div class="mb-3">
						<label for="data_inicio" class="form-label fw-bold">Data
							Inicial</label> <input type="date" class="form-control"
							name="data_inicio" th:value="${param.data_inicio}">
					</div>
					<div class="mb-3">
						<label for="data_final" class="form-label fw-bold">Data
							Final</label> <input type="date" class="form-control" name="data_final"
							th:value="${param.data_final}">
					</div>
					<div class="mb-3">
						<label for="nome_recebedor" class="form-label fw-bold">
							Nome de Recebedor</label> <select id="nome_recebedor" class="form-select"
							th:name="nome_recebedor">
							<option value="" th:selected="${param.nome_recebedor == null}">Todos</option>
							<option th:each="recebedor : ${recebedores}"
								th:value="${recebedor.nome}" th:text="${recebedor.nome}"
								th:selected="${#strings.equals(param.nome_recebedor,recebedor.nome)}"></option>
						</select>
					</div>
					<div class="mb-3">
						<label for="tipo_recebedor" class="form-label fw-bold">
							Tipo de Recebedor</label> <select id="tipo_recebedor" class="form-select"
							th:name="tipo_recebedor">
							<option value="" th:selected="${param.tipo_recebedor == null}">Todos</option>
							<option th:each="recebedor : ${recebedores}"
								th:value="${recebedor.tipoRecebedor}"
								th:text="${recebedor.tipoRecebedor}"
								th:selected="${#strings.equals(param.tipo_recebedor,recebedor.tipoRecebedor)}"></option>
						</select>
					</div>
					<div class="d-grid gap-2">
						<button type="submit" class="btn btn-dark">Filtrar</button>
						<a class="btn btn-secondary" th:href="@{/gastos}">Limpar
							Filtros</a>
					</div>
				</form>
			</div>

			<div class="col-lg-9">
				<div class="table-responsive">
					<table class="table table-bordered bg-light table-hover">
						<thead class="table-dark">
							<tr class="text-start">
								<th>Recebedor</th>
								<th>Banco</th>
								<th>Data</th>
								<th>Valor</th>
								<th>Tipo de Recebedor</th>
								<th >Ações</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="gasto : ${gastos}" th:object="${gasto}">
								<td th:text="*{recebedor.nome}" class="align-middle"></td>
								<td th:text="*{banco}" class="align-middle"></td>


								<td
									th:text="${#temporals.format(gasto.dataOcorrencia, 'dd/MM/yyyy')}"
									class="text-end align-middle"></td>
								<td class="text-end align-middle" th:text="*{valor}"></td>
								<td th:text="*{recebedor.tipoRecebedor}" class="align-middle"></td>
								<td class="align-middle text-center">
								<a th:href="@{/gastos/{id}(id=${gasto.id})}" ><i class="bi bi-info-square"></i></a>	
								</td>
								
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</main>
	
</body>
</html>
